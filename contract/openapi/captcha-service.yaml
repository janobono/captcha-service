openapi: 3.1.1
info:
  title: Captcha Service
  version: 1.0.0
paths:
  /captcha:
    get:
      operationId: getCaptcha
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Captcha'
          description: OK
        4XX:
          $ref: '#/components/responses/client-error'
        5XX:
          $ref: '#/components/responses/server-error'
      tags:
        - captcha-controller
    post:
      operationId: validateCaptcha
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaptchaData'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BooleanValue'
          description: OK
        4XX:
          $ref: '#/components/responses/client-error'
        5XX:
          $ref: '#/components/responses/server-error'
      tags:
        - captcha-controller
  /livez:
    get:
      operationId: livez
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthStatus'
          description: OK
        4XX:
          $ref: '#/components/responses/client-error'
        5XX:
          $ref: '#/components/responses/server-error'
      tags:
        - health-controller
  /readyz:
    get:
      operationId: readyz
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthStatus'
          description: OK
        4XX:
          $ref: '#/components/responses/client-error'
        5XX:
          $ref: '#/components/responses/server-error'
      tags:
        - health-controller
components:
  schemas:
    Captcha:
      type: object
      properties:
        captchaToken:
          type: string
        captchaImage:
          type: string
    ErrorCode:
      type: string
      enum:
        - UNKNOWN
        - INVALID_REQUEST
        - INVALID_FIELD
    ErrorMessage:
      type: object
      properties:
        code:
          $ref: '#/components/schemas/ErrorCode'
        message:
          type: string
        timestamp:
          format: date-time
          type: string
    CaptchaData:
      type: object
      required:
        - captchaToken
        - captchaText
      properties:
        captchaToken:
          type: string
        captchaText:
          type: string
    BooleanValue:
      type: object
      required:
        - value
      properties:
        value:
          type: boolean
    HealthStatus:
      type: object
      properties:
        status:
          type: string
  responses:
    client-error:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
      description: Client error
    server-error:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
      description: Server error
